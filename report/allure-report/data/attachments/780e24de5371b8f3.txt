//Status code check
pm.test("Status is 200", () => {
    console.log("Status Code:", pm.response.code);
    pm.response.to.have.status(200);
});

// Parse JSON response
let res = pm.response.json();
console.log("Full Response Body:", res);

//Token existence check
pm.test("Token field exists", () => {
    pm.expect(res.token, "Token field should exist in response").to.exist;
});

//Token is not empty
pm.test("Token is not empty", () => {
    console.log("Token value:", res.token);
    pm.expect(res.token, "Token should not be empty").to.not.be.empty;
});

// Save token to environment
pm.environment.set("token", res.token);
console.log(`Token stored in environment: ${res.token}`);

//Status code check
pm.test("Status is 200", () => {
    console.log("Status Code:", pm.response.code);
    pm.response.to.have.status(200);
});

// Parse JSON response
let jsonData = pm.response.json();
console.log("Full Response Body:", jsonData);

//'data' field presence check
pm.test("'data' field is present", () => {
    console.log("'data' field value:", jsonData.data);
    pm.expect(jsonData.data, "'data' should not be null").to.not.be.null;
    pm.expect(jsonData.data, "'data' should not be undefined").to.not.be.undefined;
});

//'id' inside 'data' presence check
pm.test("'id' inside 'data' is present", () => {
    console.log("'id' value inside 'data':", jsonData.data.id);
    pm.expect(jsonData.data.id, "'id' should not be null").to.not.be.null;
    pm.expect(jsonData.data.id, "'id' should not be undefined").to.not.be.undefined;
});

//'id' matches stored resourceId
let storedResourceId = pm.environment.get("resource_id");
pm.test(`'id' matches stored resourceId (${storedResourceId})`, () => {
    console.log("Stored resource_id:", storedResourceId);
    console.log("Response 'id':", jsonData.data.id);
    pm.expect(jsonData.data.id).to.eql(parseInt(storedResourceId));
});
